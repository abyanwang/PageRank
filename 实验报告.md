# <center>PageRank算法</center>

<center>17341197   张富瑞</center>

## 1.简介

PageRank，又称网页排名、谷歌左侧排名，是一种由搜索引擎根据网页之间相互的超链接计算的技术，而作为网页排名的要素之一，以Google公司创办人拉里·佩奇（Larry Page）之姓来命名。Google用它来体现网页的相关性和重要性，在搜索引擎优化操作中是经常被用来评估网页优化的成效因素之一。



## 2.计算方法

### 1.基础计算

现在将web网页抽象成节点，如果A链接B就在A，B之间连一条有向边。建立一个网络结构如下图。

![79689bf17a421c4104601e231067aad2881ccb1c](asserts\1.jpg)

A有3个出链，则它跳转到每个出链B，C，D的概率均为1/3.。如果A有k个出链，跳转到每个出链的概率为1/k。同理B到A，C，D的概率为1/2，0，1/2。C到A,B,D的概率为1，0，0。D到A，B，C的概率为0，1/2，1/2。

这样我们可以建立一个转移矩阵，一共有N个页面，则要生成一个N维矩阵，其中第i行表示的是其他页面对 第i个页面链接的概率，第j列表示的是第j个页面对其他页面链接的概率。建立矩阵如下。
$$
\left\{ \begin{matrix} 0 & 1/2 & 1 & 0\\ 1/3 & 0 & 0 & 1/2 \\ 1/3 & 0 & 0 & 1/2 \\ 1/3 & 1/2 & 0 & 0\end{matrix} \right\}
$$
同时给出一个初始的列向量，作为一开始的pagerank值。通过上面的转移矩阵和列向量相乘，我们就能够得到下一轮的pagerank值。
$$
V_1 = M*V_0=\left[ \begin{matrix} 0 & 1/2 & 1 & 0\\ 1/3 & 0 & 0 & 1/2 \\ 1/3 & 0 & 0 & 1/2 \\ 1/3 & 1/2 & 0 & 0\end{matrix} \right]*\left[\begin{matrix} 1/4\\1/4\\1/4\\1/4\end{matrix}\right]=\left[\begin{matrix} 9/24\\5/24\\5/24\\5/24\end{matrix}\right]
$$

得到了$V_1$之后我们继续使用转移矩阵和$V_1$相乘得到新的pagerank值，一直循环，直到得到稳定的值。
$$
V_2 = M*V_1=\left[ \begin{matrix} 0 & 1/2 & 1 & 0\\ 1/3 & 0 & 0 & 1/2 \\ 1/3 & 0 & 0 & 1/2 \\ 1/3 & 1/2 & 0 & 0\end{matrix} \right]*\left[\begin{matrix} 9/24\\5/24\\5/24\\5/24\end{matrix}\right]=\left[\begin{matrix} 15/48\\11/48\\11/48\\11/48\end{matrix}\right]
$$


### 2.处理Spider Traps

真实的Web链接关系若是转换成转移矩阵，那必将是一个稀疏的矩阵。而稀疏的矩阵迭代相乘会使得中间产生的PageRank向量变得不平滑（一小部分值很大，大部分值很小或接近于0）。而有一些节点虽然有指向出去的外链但是，这个外链只会指向自己。这样的节点称作Spider Traps，经过一次一次的迭代，他会将所有的值转移给自己，加剧这种不平滑。


![df0041f11939f63493c0c96eba3f182bd9d15d3e](asserts\2.jpg)

为了解决这个问题，我们需要对PageRank 计算方法进行一个平滑处理–加入teleporting(跳转因子)。也就是说，用户在访问Web页面时，除了按照Web页面的链接关系进行选择以外，他也可能直接在地址栏上输入一个地址进行访问。这样就避免了用户只在一个页面只能进行自身访问，或者进入一个页面无法出来的情况。

添加阻尼系数，来作为跳转因子。
$$
V=(1-\beta)*M*V+\frac{\beta*e}{N}
$$
其中$\beta$通常设置为一个很小的数（0.2或者0.15），e为单位向量，N是所有页面的个数，除以N是因为随机跳转到一个页面的概率是1/N。这样，每次计算PageRank值，既依赖于转移矩阵，同时依赖于小概率的随机跳转。